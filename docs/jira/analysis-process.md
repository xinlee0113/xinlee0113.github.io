---
layout: default
title: Jira问题分析标准流程
parent: 问题分析
nav_order: 1
---

## Jira问题分析标准流程 v2025.10.14

### 第一阶段：信息收集
1. **访问Jira页面**：使用mcp_cursor-playwright_browser工具打开问题页面（如 https://jira-phone.mioffice.cn/browse/XXX-12345）
2. **快照问题详情**：使用browser_snapshot查看完整内容，包括问题描述、复现步骤、预期/实际结果
3. **关注问题发生时间**：在问题描述中查找【问题发生时间】（如：2025-09-24 19:05），开机引导模块例外，这个时候多半没有联网，系统时间没有同步，时间对不齐是正常现象
4. **查看问题发生的概率**：仔细查看问题发生概率，这个会影响你分析问题的方向
5. **截图保存**：使用browser_take_screenshot保存问题详情
6. **下载日志附件**：使用browser工具下载所有附件日志到本地
7. **检查外部链接**：如果问题描述中有Kpan链接、提效工具日志链接等，使用密码访问并下载
8. **严禁口头分析**：不得仅凭用户口头描述就开始分析，必须查看原始Jira页面和完整日志

### 第二阶段：文档创建
1. **唯一性原则**：每个Jira问题单（如RREOSBUG-24672）只创建一个分析文档
2. **命名规范**：{问题单号}_{简短问题描述}.md（例如：RREOSBUG-24672_QuickStart返回按钮问题分析.md）
3. **禁止多版本**：绝对不要创建多个版本（如 xxx_分析.md、xxx_详细分析.md、xxx_最终分析.md）
4. **更新策略**：需要补充内容时直接更新现有文档，不要创建新文档
5. **可追溯性**：确保所有分析内容、时间线、根因、解决方案都集中在这个唯一文档中

### 第三阶段：日志时间验证 ：开机引导模块例外

#### 关键步骤：时间对齐检查
1. **提取问题发生时间**：
    - 从Jira描述中找到准确的问题发生时间（如：2025-09-24 19:05）
    - 记录时间格式：年-月-日 时:分

2. **检查日志采集时间**：
    - 查看bugreport文件名中的时间戳
    - 读取日志文件开头的dumpstate时间
    - 对比问题发生时间与日志采集时间

3. **时间匹配验证**：
   ```
   ✅ 可用：日志采集时间在问题发生时间前后1小时内
   ⚠️ 警惕：时间差超过1小时，可能不是问题现场日志
   ❌ 不可用：时间差超过数小时或数天，必须要求重新提供
   ```

4. **多日志文件对比**：
    - 检查是否有多个日志文件
    - 选择时间最接近问题发生时间的日志
    - 如果所有日志都不匹配，明确指出并要求提供

5. **外部链接检查**：
    - 访问Kpan等外部链接（使用提供的密码）
    - 查看是否有时间更匹配的日志文件
    - 视频文件的时间戳也是重要参考

#### 时间不匹配的处理
如果日志时间与问题发生时间不符：
1. **立即停止分析**：不要基于错误时间的日志进行技术分析
2. **在文档中明确标注**：
   ```markdown
   ❌ 关键问题：日志时间不匹配
   - 问题发生时间：2025-09-24 19:05
   - 日志采集时间：2025-09-23 22:59
   - 时间差：20小时
   - 结论：当前日志无法用于问题分析
   ```
3. **要求提供正确日志**：明确告知测试人员需要问题现场时间点的日志

### 第四阶段：日志时间线分析 ⭐**核心规范**

#### 标题规范
- 使用统一标题：**📊 日志时间线分析（基于真实日志）**

#### ⭐问题时间点分析【重点】
1. **聚焦问题发生时间**：
    - 确定问题发生的准确时间点（如：09-24 19:05）
    - 分析该时间点前后5-10分钟的日志
    - 标注关键事件的时间戳

2. **时间窗口示例**：
   ```
   问题发生时间：2025-09-24 19:05
   分析窗口：2025-09-24 18:55 - 19:15
   
   18:55-19:00  系统正常运行阶段
   19:00-19:05  问题触发阶段（重点）
   19:05-19:10  问题发生后续影响
   19:10-19:15  系统响应/恢复尝试
   ```

3. **时间线日志搜索**：
    - 使用grep搜索问题时间点：`grep "09-24 19:0[0-9]"`
    - 扩大搜索范围：前后10-15分钟
    - 关注关键进程在该时间的日志

#### 格式要求（强制）
1. **统一代码块**：所有日志必须在一个连贯的```log ... ```代码块中
2. **禁止拆分**：绝对不要用三级标题（###）拆分成独立章节
3. **阶段标注**：使用分隔线注释标注阶段，格式：`━━━━━━━━━━━━ 阶段描述（时间范围）━━━━━━━━━━━━`
4. **时间范围标注**：每个阶段必须标注时间范围
5. **原始格式**：保留完整的原始日志格式，不要转换成表格
6. **时间戳**：保留完整时间戳（如：09-23 22:47:00.453）
7. **进程信息**：保留进程名称（如：MiuiWallpaper-ImageWallpaper、ActivityTaskManager等）

#### 日志注释规范
1. **中文括号**：使用（）添加中文注释说明
2. **关键符号**：
    - 🖱️ 用户操作（点击、滑动等）
    - ❌ 问题根源、错误日志（黑色帧、异常等）
    - ⚠️ 警告、异常配置
    - ✅ 正常完成、成功
    - 📺 Display相关
    - 🔄 状态切换
    - ⏰ 时间点标记（标注关键时间）
3. **突出关键日志**：对问题根源使用多个❌强调（如：❌❌❌【关键证据】问题发生在19:05:23！）

#### 时间线组织示例
```log
━━━━━━━━━━━━ 阶段1：系统正常运行（18:55:00 - 19:00:00）━━━━━━━━━━━━

09-24 18:55:23.456  进程: 日志内容
        （系统正常运行中）

━━━━━━━━━━━━ 阶段2：问题触发阶段（19:00:00 - 19:05:00）⭐重点 ━━━━━━━━━━━━

09-24 19:02:15.789  进程: 日志内容
        🖱️ （用户操作：开始线刷）

09-24 19:05:23.456  进程: ERROR日志内容
        ❌❌❌【关键证据】⏰ 问题发生时间点！系统进入fastboot模式

━━━━━━━━━━━━ 阶段3：问题后续影响（19:05:00 - 19:10:00）━━━━━━━━━━━━

09-24 19:06:01.234  进程: 日志内容
        ⚠️ （系统尝试恢复失败）
```

#### 时间线后必须包含

1. **关键发现小结**（🔍 关键发现）：
    - 列出4-6个关键发现点
    - **必须包含问题发生的准确时间点**
    - 包含用户操作时序
    - 明确问题根源日志位置
    - 说明触发条件

2. **日志采集说明**（如果不是实时采集）：
    - 说明bugreport采集时间
    - **对比问题发生时间与日志采集时间的差异**
    - 解释为什么某些日志缺失（buffer覆盖等）
    - 如果有后续测试日志，说明其与原问题的关联性

3. **时间验证结论**：
    - 明确说明日志是否覆盖问题发生时间
    - 如果不覆盖，需要明确指出并要求补充

#### 禁止事项
- ❌ 不要将时间线拆分成"阶段1"、"阶段2"等多个独立的三级标题
- ❌ 不要将日志转换成表格格式
- ❌ 不要省略原始日志的时间戳和进程信息
- ❌ 不要使用推测性语言（如"可能"、"大概"），除非明确标注为推测
- ❌ 不要忽略问题发生时间，必须重点分析该时间点

### 第五阶段：问题范围分析
1. **进程归属判断**：基于日志中的进程信息（如包名、进程名）确定问题发生在哪个进程
2. **模块边界识别**：分析问题是否属于本模块（如MiuiProvision），还是其他模块（如SystemUI、Settings、Framework等）
3. **跨模块交互分析**：识别是否涉及多模块交互，确定问题的主要责任模块
4. **责任判定**：明确标注问题归属，如"本模块问题"、"SystemUI问题"、"Framework层问题"等
5. **转派建议**：如非本模块问题，在文档中明确说明应转派到哪个团队或模块
6. **输出范围结论**：在分析文档中添加"🎯 问题范围"章节，清晰说明问题归属

### 第六阶段：根因分析与方案输出
1. 基于日志时间线识别关键问题点
2. **聚焦问题发生时间点的关键日志**
3. 分析代码逻辑和系统行为
4. 输出根本原因和解决方案
5. 所有分析更新到唯一的分析文档中

### 质量标准
- ⭐**时间验证通过**：日志时间必须覆盖问题发生时间
- 日志时间线必须连贯在一个代码块中
- 必须捕获到问题根源的关键日志（如黑色帧、异常、错误）
- 时间线的注释必须准确、清晰、易懂
- **必须标注问题发生的准确时间点**
- 不使用推测性描述，基于实际日志证据
- 文档结构清晰，逻辑严密，可追溯